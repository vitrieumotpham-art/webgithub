extends ../../layout/defaut.pug 

block main
    .container-fluid.mt-4
        // Tiêu đề Dashboard
        h1.text-primary.fw-bold.mb-5 Dashboard Tổng Quan

        // Dữ liệu mẫu (sẽ được thay thế bằng dữ liệu từ CSDL)

        // Hàng 1: Các Thẻ Thống Kê (Stats Cards)
        .row.g-4.mb-5
            .col-lg-3.col-md-6.col-sm-12
                .card.shadow-sm.h-100
                    .card-body
                        .d-flex.align-items-center
                            //- .flex-shrink-0.me-3
                            //-     i(class=`${item.icon} fa-2x text-${item.color}`)
                            
                                // Nội dung
                            .flex-grow-1
                                h5.card-title.text-muted.text-uppercase.mb-1 tổng dự án
                                .h3.mb-0.fw-bold #{thongke.duan}
            .col-lg-3.col-md-6.col-sm-12
                .card.shadow-sm.h-100
                    .card-body
                        .d-flex.align-items-center
                            //- .flex-shrink-0.me-3
                            //-     i(class=`${item.icon} fa-2x text-${item.color}`)
                            .flex-grow-1
                                h5.card-title.text-muted.text-uppercase.mb-1 tổng bài viết
                                .h3.mb-0.fw-bold #{thongke.baiviet}
            .col-lg-3.col-md-6.col-sm-12
                .card.shadow-sm.h-100
                    .card-body
                        .d-flex.align-items-center
                            //- .flex-shrink-0.me-3
                            //-     i(class=`${item.icon} fa-2x text-${item.color}`)
                            
                                // Nội dung
                            .flex-grow-1
                                h5.card-title.text-muted.text-uppercase.mb-1 Liên Hệ
                                .h3.mb-0.fw-bold #{thongke.lienhe}
            .col-lg-3.col-md-6.col-sm-12
                .card.shadow-sm.h-100
                    .card-body
                        .d-flex.align-items-center
                            //- .flex-shrink-0.me-3
                            //-     i(class=`${item.icon} fa-2x text-${item.color}`)
                            
                                // Nội dung
                            .flex-grow-1
                                h5.card-title.text-muted.text-uppercase.mb-1 Tổng dự án nổi bật
                                .h3.mb-0.fw-bold #{thongke.duannoibat}

        // Hàng 2: Nội dung Chi tiết (Bài viết gần đây & Yêu cầu mới)
        .row.g-4
            //- Cột 1: Bài Viết Gần Đây
            .col-lg-7.col-sm-12
                .card.shadow-sm.h-100
                    .card-header.bg-light.fw-bold Bài Viết Gần Đây
                    .card-body.p-0
                        .table-responsive
                            table.table.table-hover.mb-0.align-middle
                                thead
                                    tr
                                        th ID
                                        th Tiêu đề
                                        th Trạng thái
                                tbody
                                    //- SỬA Ở ĐÂY: Dùng .slice(0, 4) để chỉ lấy 4 bài đầu tiên
                                    each article, index in baiviet.slice(0, 4)
                                        tr
                                            td #{index+1}
                                            td 
                                                strong= article.title
                                            td
                                                if article.status === 'active' || article.status === 'Hoạt động'
                                                    span.badge.bg-success #{article.status}
                                                else
                                                    span.badge.bg-warning #{article.status}
                    
                    .card-footer.text-end
                        a.text-primary(href="/admin/baiviet") Xem tất cả bài viết &raquo;

            // Cột 2: Yêu Cầu Tư Vấn Mới
            .col-lg-5.col-sm-12
                .card.shadow-sm.h-100
                    .card-header.bg-light.fw-bold Yêu Cầu Tư Vấn Mới
                    .card-body.p-0
                        .list-group.list-group-flush
                            each contact in lienhe.slice(0, 2)
                                .list-group-item.list-group-item-action
                                    .d-flex.w-100.justify-content-between
                                        h6.mb-1.fw-bold #{contact.fullName}
                                        small.text-muted #{contact.createdAt}
                                    p.mb-1 #{contact.message}
                                    small.text-muted= contact.email
                    .card-footer.text-end
                        a.text-primary(href="/admin/lienhe") Xem tất cả yêu cầu &raquo;
