extends ../../layout/defaut.pug 
include ../../mixins/alert.pug

block main
    +alert-success(5000)
    +alert-error(5000)
    .container-fluid.mt-4
        h1.text-primary.fw-bold.mb-4 Chỉnh Sửa Dịch Vụ: #{dichvu.title} 
        .card.shadow-sm
            .card-body
                form(
                    // 1. ACTION: Trỏ đến route PATCH với ID của dịch vụ
                    action=`/${PefixAdmin}/dichvu/edit/${dichvu.id}?_method=PATCH` 
                    method="POST" 
                    enctype="multipart/form-data"
                    )
                    
                    // 1. Tiêu đề (title)   
                    .mb-3
                        label.form-label(for="title") Tiêu đề dịch vụ (*):
                        input.form-control(
                            type="text",
                            id="title", 
                            name="title", 
                            value=dichvu.title
                            required
                            )
                    
                    // 2. Slug (Đường dẫn tĩnh)
                    .mb-3
                        label.form-label(for="slug") Slug/Đường dẫn tĩnh:
                        input.form-control(type="text", id="slug", name="slug", value=dichvu.slug)
                    
                    // 3. Mô tả (description)
                    .mb-3
                        label.form-label(for="description") Mô tả ngắn:
                        textarea.form-control(
                            id="my-expressjs-tinymce-app", 
                            name="description", 
                            rows="3"
                            ) #{dichvu.description} 

                    // 4. Giá tham khảo (price)
                    .mb-3
                        label.form-label(for="price") Giá tham khảo:
                        input.form-control(
                            type="text", 
                            id="price", 
                            name="price", 
                            value=dichvu.price 

                            placeholder="Ví dụ: 3.500.000 hoặc Liên hệ"
                            )
                    
                    // 5. Nội dung chi tiết (content)
                    .mb-3
                        label.form-label(for="content") Nội dung chi tiết:
                        textarea.form-control(
                            id="my-expressjs-tinymce-app",
                            name="content", 

                            rows="5"
                            ) #{dichvu.content} 

                    // 6. Thumbnail (Hình ảnh đại diện)
                    .mb-3
                        label.form-label(for="thumbnail") Hình ảnh đại diện:
                        input.form-control(
                            type="file", 
                            id="thumbnail", 
                            name="thumbnail", 
                            accept="image/*",
                            upload-image-input
                            )
                        // Hiển thị ảnh cũ nếu tồn tại
                        img(
                            src=dichvu.thumbnail ? dichvu.thumbnail : ""
                            upload-image-preview 
                            style="max-width: 200px; margin-top: 10px;"
                            )    

                    // 7. Vị trí (position)
                    .mb-3
                        label.form-label(for="position") Vị trí/Thứ tự:
                        input.form-control(
                            type="number", 
                            id="position", 
                            name="position", 
                            value=dichvu.position 
                            min="0", 
                            style="width: 100px;"
                            )

                    // 8. Trạng thái (status)
                    .mb-3
                        label.form-label Trạng thái:
                        .form-check
                            input.form-check-input(
                                type="radio", 
                                name="status", 
                                id="statusActive", 
                                value="active", 
                                checked=(dichvu.status === 'active') 
                                )
                            label.form-check-label(for="statusActive") Hoạt động
                        .form-check
                            input.form-check-input(
                                type="radio", 
                                name="status", 
                                id="statusInactive", 
                                value="inactive",
                                checked=(dichvu.status === 'inactive') 
                                )
                            label.form-check-label(for="statusInactive") Dừng hoạt động

                    // 9. Nút Submit
                    .mt-4
                        button.btn.btn-info.shadow-sm(type="submit")
                            i.fas.fa-edit.me-2
                            | Cập nhật
                        a.btn.btn-secondary.ms-2(href=`/${PefixAdmin}/dichvu`)
                            i.fas.fa-arrow-left.me-2
                            | Quay lại