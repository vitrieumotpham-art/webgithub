extends ../../layouts/defaut.pug
include ../../mixins/box.head.pug

block main
    //- Thêm CSS xử lý Header Fixed và Layout tìm kiếm
    style.
        .search-results-wrapper {
            padding-top: 100px; /* Đẩy nội dung xuống dưới Header 80px */
            min-height: 100vh;
        }
        .project-card {
            transition: transform 0.3s ease;
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .project-card:hover {
            transform: translateY(-5px);
        }
        .line-clamp-1 {
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .classic-search-item {
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            border: 1px solid #eee;
            transition: all 0.3s ease;
        }
        .classic-search-item:hover {
            border-color: #c5a059;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

    //- Bọc toàn bộ vào wrapper
    .search-results-wrapper
        .container.py-5
            +box-head("KẾT QUẢ TÌM KIẾM")
            
            if keyword
                p.mb-5.text-muted Kết quả tìm kiếm cho từ khóa: #[strong.text-dark "#{keyword}"]

            //- PHẦN 1: DỰ ÁN TÌM THẤY
            section.results-section.mb-5
                h3.h4.border-bottom.pb-2.fw-bold
                    i.fas.fa-home.me-2.text-warning
                    | DỰ ÁN KIẾN TRÚC (#{duan.length})
                .row.mt-4
                    if duan.length > 0
                        each item in duan
                            .col-md-4.mb-4
                                .project-card
                                    a.text-decoration-none.text-dark(href=`/duan/detail/${item.slug}`)
                                        img(src=item.thumbnail class="w-100" style="height: 220px; object-fit: cover")
                                        .p-3
                                            h4.h6.mb-0.fw-bold #{item.title}
                    else
                        .col-12: p.text-muted.fst-italic Không tìm thấy dự án nào phù hợp.

            //- PHẦN 2: BÀI VIẾT TÌM THẤY
            section.results-section.pb-5
                h3.h4.border-bottom.pb-2.fw-bold
                    i.fas.fa-newspaper.me-2.text-primary
                    | TIN TỨC & BÀI VIẾT (#{articles.length})
                .row.mt-4
                    if articles.length > 0
                        each item in articles
                            .col-md-6.mb-4
                                .classic-search-item.d-flex.gap-3
                                    img.rounded(src=item.thumbnail style="width: 120px; height: 85px; object-fit: cover")
                                    .content
                                        h4.h6.mb-1
                                            a.text-decoration-none.text-dark.fw-bold(href=`/tintuc/${item.slugLink}`) #{item.title}
                                        p.small.text-muted.line-clamp-1.mb-0 #{item.description}
                    else
                        .col-12: p.text-muted.fst-italic Không tìm thấy bài viết nào phù hợp.